---
import type { TeamMember } from '../../types/TeamMember';

export interface Props {
  member: TeamMember;
  index: number;
}

const { member} = Astro.props;

// Mostrar solo las primeras 3 habilidades y el resto como "+X"
const displaySkills = member.skills.slice(0, 3);
const remainingSkills = member.skills.length - 3;
---

<div 
  class="bg-card rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border border-border group cursor-pointer team-member-card" 
  data-member-id={member.id}
  style="opacity: 1; transform: none;"
>
  <div class="relative overflow-hidden h-64">
    <img 
      alt={member.name} 
      class="h-80 w-full object-cover group-hover:scale-110 transition-transform duration-500" 
      src={member.image}
    >
    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
    <div class="absolute bottom-4 left-4 right-4 flex justify-center space-x-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
      <a 
        href={member.linkedin} 
        class="bg-white/20 backdrop-blur-sm text-white p-2 rounded-full hover:bg-primary transition-colors" 
        tabindex="0"
        aria-label={`LinkedIn de ${member.name}`}
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin w-4 h-4">
          <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
          <rect width="4" height="12" x="2" y="9"></rect>
          <circle cx="4" cy="4" r="2"></circle>
        </svg>
      </a>
      <a 
        href={`mailto:${member.email}`} 
        class="bg-white/20 backdrop-blur-sm text-white p-2 rounded-full hover:bg-primary transition-colors" 
        tabindex="0"
        aria-label={`Email de ${member.name}`}
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail w-4 h-4">
          <rect width="20" height="16" x="2" y="4" rx="2"></rect>
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
        </svg>
      </a>
    </div>

  </div>
  <div class="p-6">
    <h3 class="text-2xl font-bold text-foreground mb-1 group-hover:text-primary transition-colors">
      {member.name}
    </h3>
    <p class="font-normal mb-2 text-slate-600">{member.position}</p>
    <p class="text-muted-foreground text-sm mb-4">{member.specialization}</p>
    <div class="space-y-2 mb-4">
      <div class="flex items-center text-sm text-muted-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin w-4 h-4 mr-2">
          <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        {member.location}
      </div>
      <div class="flex items-center text-sm text-muted-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase w-4 h-4 mr-2">
          <path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          <rect width="20" height="14" x="2" y="6" rx="2"></rect>
        </svg>
        {member.projectsCompleted} proyectos completados
      </div>
    </div>
    <div class="flex flex-wrap gap-2 mb-4">
      {displaySkills.map(skill => (
        <span class="bg-accent text-accent-foreground px-2 py-1 rounded text-xs font-medium">
          {skill}
        </span>
      ))}
      {remainingSkills > 0 && (
        <span class="bg-muted text-muted-foreground px-2 py-1 rounded text-xs">
          +{remainingSkills}
        </span>
      )}
    </div>
    <div class="text-primary font-medium group-hover:translate-x-1 transition-transform duration-200">
      Ver perfil completo â†’
    </div>
  </div>
</div>